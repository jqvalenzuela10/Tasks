<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
<title>Friend form</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
	integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
	crossorigin="anonymous">
<link rel="stylesheet" th:href="@{/estilos/estilos.css}">

<link rel="icon" type="image/png" th:href="@{/img/iconoNavegador.png}" />

</head>
<body>

<h1>Hola :))))</h1>
</body>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
	integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
	crossorigin="anonymous"></script>

<script
	src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
	integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
	crossorigin="anonymous"></script>
<script
	src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
<script>
$(function(){
	  
		  $(".tareaDescripcion").keyup(function(e){
			  e.preventDefault();
			  let tarea={};
			  
			  const $padre=$(e.currentTarget).parent();
			  //el hijo seria el checkbox
			  const $hijo=$padre.children()[0];
			  
			  console.log($padre);
			  console.log($hijo);
			  console.log(e.target.id+' '+e.target.value+'  '+$($hijo).children().is(":checked"));
			
			  tarea={
			    		id:e.target.id,
			    		descripcion:e.target.value,
			    		hecho:$($hijo).children().is(":checked")	 
			     		}
			  
			  axios.put("https://jqvalenzuelatask.herokuapp.com/rest/user", tarea).then(response => {
		    		console.log(response.data)
		    		
		        });
			 
		  });  
	    
   $(".checkbox-tarea").click(function(e){
		 
		  
		  if(e.target.id!=""){
			 
			  let tarea={};
			  console.log('haz tocado el checkbox-tarea');
			  
			  const $padre=$(e.currentTarget).parent();

			  const $padreSuperio=$($padre).parent();
			  //el hijo seria la descripcion
			  const $hijo=$padreSuperio.children()[1];
			  
			  console.log(e.target.id+' '+$($hijo).children().val()+'  '+$(e.target).is(":checked"));
			  
			  tarea={
			    		id:e.target.id,
			    		descripcion:$($hijo).children().val(),
			    		hecho:$(e.target).is(":checked")	 
			     		}
			  
			  axios.put("https://jqvalenzuelatask.herokuapp.com/rest/user", tarea).then(response => {
		    		console.log(response.data)
		    		
		        });
			  
		  	}
		  
		
	  }); 
   
   
});

</script>
</html>